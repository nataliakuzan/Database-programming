create or replace PROCEDURE assign_waiter_for_order IS
   staff_id staff.employee_id%TYPE;
BEGIN
      SELECT employee_id INTO staff_id
      FROM(SELECT s.employee_id, COUNT(o.employee_id) as orders
        FROM staff s JOIN orders o
        ON (s.employee_id  = o.employee_id)
        GROUP BY s.employee_id
        ORDER BY COUNT(o.employee_id) ASC) WHERE ROWNUM = 1;

      UPDATE orders SET employee_id = staff_id WHERE employee_id IS NULL;

      IF sql%ROWCOUNT = 0 THEN
         DBMS_OUTPUT.put_line('All orders have assigned waiter.');
      ELSE 
         DBMS_OUTPUT.put_line('Waiter with id ' || staff_id || ' was assigned to ' || sql%ROWCOUNT || ' of new orders.');
      END IF;
END assign_waiter_for_order;